# Authors:: Jack Perdue <j-perdue@tamu.edu> - TAMU HPRC - https://hprc.tamu.edu

easyblock = 'PythonPackage'

name = 'smcpp'
version = '1.15.3'
versionsuffix = '-Python-%(pyver)s'

homepage = 'https://github.com/popgenmethods/smcpp'

description = """
 SMC++ is a program for estimating the size history of populations from whole
 genome sequence data.
"""

toolchain = {'name': 'foss', 'version': '2019b'}

# Must use git clone, not tarball from GitHub
#   git clone --depth 1 --branch v1.15.3  https://github.com/popgenmethods/smcpp.git
#   tar cvzf scmpp-1.15.3-gitclone.tar.gz smcpp
# Given that, there is no checksum below
sources = ['%(name)s-%(version)s-gitclone.tar.gz']
checksums = []

dependencies = [
    ('cURL', '7.66.0'),
    ('GMP', '6.1.2'),
    ('GSL', '2.6'),
    ('h5py', '2.10.0', versionsuffix),
    ('matplotlib', '3.1.1', versionsuffix),
    ('MPFR', '4.0.2'),
    ('Pysam', '0.15.3'),
    ('Python', '3.7.4'),
    ('scikit-learn', '0.21.3', versionsuffix),
    ('SciPy-bundle', '2019.10', versionsuffix),
    ('tqdm', '4.41.1'),
]

sanity_check_paths = {
    'files': ['bin/smc++', 'lib/python%(pyshortver)s/site-packages/easy-install.pth'],
    'dirs': [],
}

moduleclass = 'bio'
